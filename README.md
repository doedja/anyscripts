Should've put this on gist, but whatev.
